extends ../layout

block content
  h1 Item #{report.itemCode}
  a.btn.btn-link(href='/ct/items') Back to list
  if report.rows && report.rows.length
    table.table.table-dark.table-striped.mt-3
      thead
        tr
          th Case
          th Status
          th Staff
          th Issue
          th Value
          th Recorded
      tbody
        each row in report.rows
          tr
            td
              if row.case
                a(href=`/ct/case/${row.case.id}`)= row.case.order
              else
                span.text-muted Unknown case
            td= row.case ? (row.case.status || '—') : '—'
            td= row.case ? (row.case.staff_in_charge || '—') : '—'
            td= row.item.defect || '—'
            td= row.item.item_cost ? `${row.item.item_cost} JPY` : '—'
            td= row.item.created_date ? ((new Date(row.item.created_date)).toISOString().split('T')[0]) : '—'
  else
    p.text-muted No cases reference this item yet.
